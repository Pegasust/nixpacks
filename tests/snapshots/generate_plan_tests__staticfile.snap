---
source: tests/generate_plan_tests.rs
expression: plan
---
{
  "variables": {},
  "phases": [
    {
      "name": "setup",
      "nixPackages": [
        {
          "name": "nginx"
        }
      ],
      "nixLibraries": [],
      "aptPackages": []
    },
    {
      "name": "install",
      "dependsOn": [
        "setup"
      ]
    },
    {
      "name": "build",
      "dependsOn": [
        "install"
      ],
      "commands": [
        "mkdir /etc/nginx/ /var/log/nginx/ /var/cache/nginx/"
      ]
    }
  ],
  "startPhase": {
    "cmd": "[[ -z \"${PORT}\" ]] && echo \"Environment variable PORT not found. Using PORT 80\" || sed -i \"s/0.0.0.0:80/$PORT/g\" /assets/nginx.conf && nginx -c /assets/nginx.conf"
  }
}
